<!doctype html>
{{> license}}
<html>
  <head>
    {{> meta title='castLabs DRM Encrypted Playback'}}
    {{> header-scripts}}
    {{> header-stylesheets}}
    <style>
      .section {
        max-width: unset!important;
      }
      .container {
        display: flex;
        justify-content: center;
        column-gap: 20px;
        flex-wrap: wrap;
        row-gap: 20px;
      }

      .info-title {
        padding: 20px 10px;
        box-sizing: border-box;
        background-color: #eeee;
      }
      .paddedHR {
        margin: 0!important;
        margin-top: 10px;
      }
      .nsettings {
        display: grid;
        grid-template-columns: max-content max-content;
        grid-gap: 10px;
        background-color: #eeee;
        padding: 20px;
        justify-content: center;
        align-items: center;
      }

      .nsettings label {
        text-align: right;
      }

      .nsettings input, .nsettings select {
        font-size: 1em;
        height: 1.8em;
      }
    </style>
  </head>
  <body>
    {{> top-bar }}
    {{> navigation isTestPage=true }}
    <div id="app">
      {{> settings-link}}
      {{> test-info testTitle='castLabs DRM Encrypted Playback Stream Manager'}}
      <div class="stream-section section">
        <div class="centered container">
          <div class="encrypted-playback">
            <div class="centered status-field">
              <p id="encrypted-status-field" class="status-field_status">On hold.</p>
            </div>
            <p id="encrypted-statistics-field" class="centered status-field statistics-field hidden">
              <!-- only updated from WebRTC clients. -->
              Bitrate: <span id="encrypted-bitrate-field" class="bitrate-field">N/A</span>.&nbsp;
              Packets Received: <span id="encrypted-packets-field" class="packets-field">N/A</span>.
              <br/>
              <span>Resolution: <span id="encrypted-resolution-field" class="resolution-field">0x0</span>.
            </p>
            <div class="centered"><p id="encrypted-address-field" class="address-field">Edge Address: N/A</p></div>
            <div class="settings-area">
              <p class="centered info-title">Encrypted Playback</p>
            </div>
            <video id="red5pro-encrypted"
                    controls="controls" autoplay="autoplay" playsinline
                    class="red5pro-subscriber"
                    width="320" height="240">
            </video>
          </div>
          <div class="decrypted-playback">
            <div class="centered status-field">
              <p id="decrypted-status-field" class="status-field_status">On hold.</p>
            </div>
            <p id="decrypted-statistics-field" class="centered status-field statistics-field hidden">
              <!-- only updated from WebRTC clients. -->
              Bitrate: <span id="decrypted-bitrate-field" class="bitrate-field">N/A</span>.&nbsp;
              Packets Received: <span id="decrypted-packets-field" class="packets-field">N/A</span>.
              <br/>
              <span>Resolution: <span id="decrypted-resolution-field" class="resolution-field">0x0</span>.
            </p>
            <div class="centered"><p id="decrypted-address-field" class="address-field">Edge Address: N/A</p></div>
            <div class="centered info-title">
              <p>Enter the following information to playback decrypted video:</p>
            </div>
            <hr class="paddedHR">
            <div class="nsettings">
                <label for="env-select">castLabs Environment:</label>
                <select id="env-select" name="env-select">
                  <option value="Staging" selected>Staging</option>
                </select>

                <label for="merchant-input">Merchant:</label>
                <input id="merchant-input" name="key-input" value="red5" placeholder="Merchant" />

                <label for="user-input">User:</label>
                <input id="user-input" name="key-input" value="test" placeholder="User" />

                <label for="session-input">Session:</label>
                <input id="session-input" name="key-input" value="p0" placeholder="Session" />

                <label for="type-select">Encryption Type:</label>
                <select id="type-select" name="type-select">
                  <option value="widevine">Widevine</option>
                  <option value="playready">PlayReady</option>
                  <option value="fairplay">FairPlay</option>
                  <option value="clearkey" selected>ClearKey</option>
                </select>

                <label for="key-input">Key Id / IV:</label>
                <input id="key-input" name="key-input" placeholder="Key Id / IV" />
            </div>
            <div style="background-color: black;">
              <video id="red5pro-subscriber"
                      controls
                      autoplay
                      playsinline
                      class="red5pro-subscriber"
                      width="320" height="240">
              </video>
            </div>
            <div>
              <button id="decrypt-button" class="ui-button">Decrypt</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    {{> body-scripts}}
    {{> mobile-subscriber-util}}
    {{> sm-scripts}}
    <script type="module" src="index.js"></script>
  </body>
</html>
