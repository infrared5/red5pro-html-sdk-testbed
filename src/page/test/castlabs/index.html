<!doctype html>
{{> license}}
<html>
  <head>
    {{> meta title='castLabs DRM Encrypted Playback'}}
    {{> header-scripts}}
    {{> header-stylesheets}}
    <style>
      .section {
        max-width: unset!important;
      }
      .container {
        display: flex;
        justify-content: center;
        column-gap: 20px;
        flex-wrap: wrap;
        row-gap: 20px;
      }
      .settings-area {
        background-color: #eeee;
        padding-bottom: 10px;
      }
      .settings-field {
        background-color: #eeee;
        padding: 10px;
        margin: unset!important;
      }
      .settings-field, .settings-field > input {
        font-size: 1em; 
      }
      .info-title {
        padding: 20px 10px;
        box-sizing: border-box;
      }
      .paddedHR {
        margin: 0!important;
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    {{> top-bar }}
    {{> navigation isTestPage=true }}
    <div id="app">
      {{> settings-link}}
      {{> test-info testTitle='castLabs DRM Encrypted Playback'}}
      <div class="stream-section section">
        <div class="centered container">
          <div class="encrypted-playback">
            <div class="centered status-field">
              <p id="encrypted-status-field" class="status-field_status">On hold.</p>
            </div>
            <p id="encrypted-statistics-field" class="centered status-field statistics-field hidden">
              <!-- only updated from WebRTC clients. -->
              Bitrate: <span id="encrypted-bitrate-field" class="bitrate-field">N/A</span>.&nbsp;
              {{ packets_field }}: <span id="encrypted-packets-field" class="packets-field">N/A</span>.
              <br/>
              <span>Resolution: <span id="encrypted-resolution-field" class="resolution-field">0x0</span>.
            </p>            
            <div class="settings-area">
              <p class="centered info-title">Encrypted Playback</p>
            </div>
            <video id="red5pro-encrypted"
                    controls="controls" autoplay="autoplay" playsinline
                    class="red5pro-subscriber"
                    width="320" height="240">
            </video>
          </div>
          <div class="decrypted-playback">
            <div class="centered status-field">
              <p id="decrypted-status-field" class="status-field_status">On hold.</p>
            </div>
            <p id="decrypted-statistics-field" class="centered status-field statistics-field hidden">
              <!-- only updated from WebRTC clients. -->
              Bitrate: <span id="decrypted-bitrate-field" class="bitrate-field">N/A</span>.&nbsp;
              {{ packets_field }}: <span id="decrypted-packets-field" class="packets-field">N/A</span>.
              <br/>
              <span>Resolution: <span id="decrypted-resolution-field" class="resolution-field">0x0</span>.
            </p>
            <div class="settings-area">
              <p class="centered info-title">Enter the following information to playback decrypted video:</p>
              <hr class="paddedHR">
              <p class="settings-field settings-collapsable">
                <label for="env-select" class="settings-label">castLabs Environment:</label>
                <select id="env-select" name="env-select" style="width: 45%">
                  <option value="Staging" selected>Staging</option>
                </select>
              </p>
              <p class="settings-field settings-collapsable">
                <label for="merchant-input" class="settings-label">Merchant:</label>
                <input id="merchant-input" name="key-input" value="red5" placeholder="Merchant" />
              </p>
              <p class="settings-field settings-collapsable">
                <label for="user-input" class="settings-label">User:</label>
                <input id="user-input" name="key-input" value="test" placeholder="User" />
              </p>
              <p class="settings-field settings-collapsable">
                <label for="session-input" class="settings-label">Session:</label>
                <input id="session-input" name="key-input" value="p0" placeholder="User" />
              </p>
              <p class="settings-field settings-collapsable">
                <label for="type-select" class="settings-label">Encryption Type:</label>
                <select id="type-select" name="type-select" style="width: 45%">
                  <option value="widevine">Widevine</option>
                  <option value="playready">PlayReady</option>
                  <option value="fairplay">FairPlay</option>
                  <option value="clearkey" selected>ClearKey</option>
                </select>
              </p>
              <p class="settings-field settings-collapsable">
                <label for="key-input" class="settings-label">Key Id / IV:</label>
                <input id="key-input" name="key-input" placeholder="Key Id / IV" value=""/>
              </p>
            </div>
            <div style="background-color: black;">
              <video id="red5pro-subscriber"
                      controls="controls" autoplay="autoplay" playsinline
                      class="red5pro-subscriber"
                      width="320" height="240">
              </video>        
            </div>
            <div>
              <button id="decrypt-button" class="ui-button">Decrypt</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    {{> body-scripts}}
    {{> mobile-subscriber-util}}
    <script type="module" src="index.js"></script>
  </body>
</html>
